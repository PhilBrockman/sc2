{"ast":null,"code":"var _jsxFileName = \"/Users/philbrockman/coding/sc2/client/src/components/Attacker/Attacker.js\";\nimport React from 'react';\nimport { UnitSelector } from '../UnitSelector/UnitSelector';\nimport { canAttackTargetDefender } from \"./Damage\";\nimport \"./Attacker.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass AttackerErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      errorInfo: null\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Catch errors in any components below and re-render with error message\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    }); // You can also log error messages to an error reporting service here\n  }\n\n  render() {\n    if (this.state.errorInfo) {\n      // Error path\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Something went wrong.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          style: {\n            whiteSpace: 'pre-wrhap'\n          },\n          children: [this.state.error && this.state.error.toString(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 13\n          }, this), this.state.errorInfo.componentStack]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this);\n    } // Normally, just render children\n\n\n    return this.props.children;\n  }\n\n}\n\nconst Bonus = ({\n  attack,\n  defender,\n  textstyle\n}) => {\n  return attack.bonuses.map((bonus, index) => {\n    let baseText = /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\"Anti-\", bonus.to, \":\"]\n    }, void 0, true);\n\n    let bonusText = /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [bonus.baseDamage, \" (+\", bonus.researchBonus, \")\"]\n    }, void 0, true);\n\n    let modifier;\n\n    if (!defender) {\n      modifier = /*#__PURE__*/_jsxDEV(\"span\", {\n        children: bonusText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 18\n      }, this);\n    } else {\n      // const overlap = false;//groundAirTargetingValidation(attack, defender);\n      // if (overlap.length === 0){\n      //   modifier = <span> {bonusText} </span>\n      // }else{\n      if (defender.types.includes(bonus.to)) {\n        modifier = /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [bonusText, \" \\uD83C\\uDFAF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 22\n        }, this);\n      } else {\n        modifier = /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            textDecoration: \"wavy line-through red\"\n          },\n          children: bonusText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this);\n      } // }\n\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [baseText, /*#__PURE__*/_jsxDEV(\"span\", {\n        className: textstyle,\n        children: modifier\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this);\n  });\n};\n\n_c = Bonus;\n\nconst Bullet = ({\n  animate,\n  display\n}) => {\n  if (display) {\n    if (animate) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"bullet\",\n        children: \"\\u27A1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"\\u27A1\"\n      }, void 0, false);\n    }\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  }\n}; // const WeaponDisplay = ({available, selected, classes}) => {\n//   return <>\"weapon\"</>\n//   // const cns = []\n//   // cns.push(index === attacker.weapon ? \"main-weapon\" : \"other-choice\");\n//   // cns.push(available ? \"attack-available\" : \"attack-unavailable\");\n//   // const attacks = [\"attack-name\"]\n//   // attacks.push(available? \"alt-weapon\": \"unavailable\")\n//   // attacks.push(available && (defaultIndex === null) ? \"pulse\": \"\")\n//   // console.log('attacks', attacks)\n//   // console.log('defaultIndex', defaultIndex)\n//   // return <div key={index} onClick={() => toggleIndex(index)} className={cns.join(\" \")}>\n//   //   <>\n//   //     <div className={classes.join(\" \")} >\n//   //       <Bullet animate={available && (defaultIndex === null)} display={(true)}/>\n//   //           {attack.name} {attack.repeats > 1 ? <>(x {attack.repeats})</>: null}\n//   //     {index === defaultIndex ?\n//   //       <div>\n//   //         <>Base Damage: <span className={cn}>{attack.baseDamage} (+{attack.researchBonus})</span></>\n//   //         <Bonus attack={attack} defender={defender} textstyle={cn}/>\n//   //       </div>\n//   //       : null\n//   //       }\n//   //       </div>\n//   //   </>\n//   // </div>\n// }\n\n\n_c2 = Bullet;\n\nconst Attacks = ({\n  attacker,\n  defender,\n  setAttackingWeapon\n}) => {\n  const Attack = ({\n    attack,\n    available,\n    selected\n  }) => {\n    var _attacker$weapon;\n\n    const cns = [];\n    cns.push((attacker === null || attacker === void 0 ? void 0 : (_attacker$weapon = attacker.weapon) === null || _attacker$weapon === void 0 ? void 0 : _attacker$weapon.name) === (attack === null || attack === void 0 ? void 0 : attack.name) ? \"main-weapon\" : \"other-choice\");\n    cns.push(available ? \"attack-available\" : \"attack-unavailable\");\n    const attacks = [\"attack-name\"];\n    attacks.push(available ? \"alt-weapon\" : \"unavailable\");\n    attacks.push(available && (!attacker.weapon ? \"pulse\" : \"\"));\n    console.log('attacks', attacks);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setAttackingWeapon(attack),\n      className: cns.join(\" \"),\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: attacks.join(\" \"),\n          children: [/*#__PURE__*/_jsxDEV(Bullet, {\n            animate: attacks.includes(\"pulse\"),\n            display: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 11\n          }, this), attack.name, \" \", attack.repeats > 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"(x \", attack.repeats, \")\"]\n          }, void 0, true) : null, selected ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\"Base Damage: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: attacks.includes(\"pulse\") ? \"bullet\" : \"\",\n                children: [attack.baseDamage, \" (+\", attack.researchBonus, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(Bonus, {\n              attack: attack,\n              defender: defender,\n              textstyle: \"yellow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 11\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 12\n    }, this);\n  };\n\n  const attackMap = attacker === null || attacker === void 0 ? void 0 : attacker.attacks.map((attack, idx) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Attack, {\n        attack: attack,\n        available: () => canAttackTargetDefender(attack, defender),\n        selected: attack === attacker.weapon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 27\n      }, this)\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 12\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"attacks\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: (attacker === null || attacker === void 0 ? void 0 : attacker.attacks.length) > 0 ? Attacks : \"pacifist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }, this), attacker ? attackMap : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 10\n  }, this);\n};\n\n_c3 = Attacks;\nexport const Attacker = ({\n  attacker,\n  defender,\n  setAttacker,\n  units\n}) => {\n  const setAttackingWeapon = weapon => {\n    if (weapon !== attacker.weapon) {\n      setAttacker({ ...attacker,\n        weapon: weapon\n      });\n    } else {\n      setAttacker({ ...attacker,\n        weapon: null\n      });\n    }\n\n    return null;\n  };\n\n  return /*#__PURE__*/_jsxDEV(AttackerErrorBoundary, {\n    children: /*#__PURE__*/_jsxDEV(UnitSelector, {\n      setUnit: setAttacker,\n      currentUnit: attacker,\n      units: units,\n      children: (attacker === null || attacker === void 0 ? void 0 : attacker.attacks.length) > 0 ? /*#__PURE__*/_jsxDEV(Attacks, {\n        attacker: attacker,\n        setAttackingWeapon: setAttackingWeapon,\n        defender: defender\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 7\n      }, this) : attacker ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"pacifist\"\n      }, void 0, false) : \"nonthing selected\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 10\n  }, this);\n};\n_c4 = Attacker;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Bonus\");\n$RefreshReg$(_c2, \"Bullet\");\n$RefreshReg$(_c3, \"Attacks\");\n$RefreshReg$(_c4, \"Attacker\");","map":{"version":3,"sources":["/Users/philbrockman/coding/sc2/client/src/components/Attacker/Attacker.js"],"names":["React","UnitSelector","canAttackTargetDefender","AttackerErrorBoundary","Component","constructor","props","state","error","errorInfo","componentDidCatch","setState","render","whiteSpace","toString","componentStack","children","Bonus","attack","defender","textstyle","bonuses","map","bonus","index","baseText","to","bonusText","baseDamage","researchBonus","modifier","types","includes","textDecoration","Bullet","animate","display","Attacks","attacker","setAttackingWeapon","Attack","available","selected","cns","push","weapon","name","attacks","console","log","join","repeats","attackMap","idx","length","Attacker","setAttacker","units"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { UnitSelector } from '../UnitSelector/UnitSelector'\nimport {canAttackTargetDefender} from \"./Damage\"\nimport \"./Attacker.css\"\n\nclass AttackerErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null, errorInfo: null };\n  }\n  \n  componentDidCatch(error, errorInfo) {\n    // Catch errors in any components below and re-render with error message\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    })\n    // You can also log error messages to an error reporting service here\n  }\n  \n  render() {\n    if (this.state.errorInfo) {\n      // Error path\n      return (\n        <div>\n          <h2>Something went wrong.</h2>\n          <details style={{ whiteSpace: 'pre-wrhap' }}>\n            {this.state.error && this.state.error.toString()}\n            <br />\n            {this.state.errorInfo.componentStack}\n          </details>\n        </div>\n      );\n    }\n    // Normally, just render children\n    return this.props.children;\n  }  \n}\n\n\nconst Bonus = ({attack, defender, textstyle}) => {\n\n  return attack.bonuses.map((bonus, index) => {\n    let baseText = <>Anti-{bonus.to}:</>\n    let bonusText = <>{bonus.baseDamage} (+{bonus.researchBonus})</>;\n    let modifier;\n    \n    if(!defender){\n      modifier = <span>{bonusText}</span>\n    } else {\n      // const overlap = false;//groundAirTargetingValidation(attack, defender);\n      // if (overlap.length === 0){\n      //   modifier = <span> {bonusText} </span>\n      // }else{\n        if (defender.types.includes(bonus.to) ){\n          modifier=  <span>{bonusText} 🎯</span>\n        } else {\n          modifier= <span style={{textDecoration: \"wavy line-through red\"}}>{ bonusText}</span>\n        }\n      // }\n    }\n\n    return <div key={index}>\n      {baseText}\n      <span className={textstyle}>\n      {modifier}\n      </span>\n    </div>\n  })  \n}\n\nconst Bullet = ({animate, display}) => {\n  if(display){\n    if (animate){\n      return <span className={\"bullet\"}>➡</span>\n    } else {\n      return <>➡</>\n    }\n  } else {\n    return <></>\n  }\n}\n\n// const WeaponDisplay = ({available, selected, classes}) => {\n//   return <>\"weapon\"</>\n//   // const cns = []\n//   // cns.push(index === attacker.weapon ? \"main-weapon\" : \"other-choice\");\n//   // cns.push(available ? \"attack-available\" : \"attack-unavailable\");\n//   // const attacks = [\"attack-name\"]\n//   // attacks.push(available? \"alt-weapon\": \"unavailable\")\n//   // attacks.push(available && (defaultIndex === null) ? \"pulse\": \"\")\n//   // console.log('attacks', attacks)\n//   // console.log('defaultIndex', defaultIndex)\n//   // return <div key={index} onClick={() => toggleIndex(index)} className={cns.join(\" \")}>\n//   //   <>\n//   //     <div className={classes.join(\" \")} >\n//   //       <Bullet animate={available && (defaultIndex === null)} display={(true)}/>\n//   //           {attack.name} {attack.repeats > 1 ? <>(x {attack.repeats})</>: null}\n//   //     {index === defaultIndex ?\n//   //       <div>\n//   //         <>Base Damage: <span className={cn}>{attack.baseDamage} (+{attack.researchBonus})</span></>\n//   //         <Bonus attack={attack} defender={defender} textstyle={cn}/>\n//   //       </div>\n//   //       : null\n//   //       }\n//   //       </div>\n//   //   </>\n//   // </div>\n// }\n\nconst Attacks = ({attacker, defender, setAttackingWeapon}) => {\n  const Attack = ({attack, available, selected}) => {\n    const cns = []\n    cns.push(attacker?.weapon?.name === attack?.name ? \"main-weapon\" : \"other-choice\");\n    cns.push(available ? \"attack-available\" : \"attack-unavailable\");\n    const attacks = [\"attack-name\"]\n    attacks.push(available? \"alt-weapon\": \"unavailable\")\n    attacks.push(available && (!attacker.weapon ? \"pulse\": \"\"))\n    console.log('attacks', attacks)\n    return <div onClick={() => setAttackingWeapon(attack)} className={cns.join(\" \")}>\n      <>\n        <div className={attacks.join(\" \")} >\n          <Bullet animate={attacks.includes(\"pulse\")} display={(true)}/>\n              {attack.name} {attack.repeats > 1 ? <>(x {attack.repeats})</>: null}\n        {selected ?\n          <div>\n            <>Base Damage: <span className={attacks.includes(\"pulse\") ? \"bullet\" : \"\"}>{attack.baseDamage} (+{attack.researchBonus})</span></>\n            <Bonus attack={attack} defender={defender} textstyle={\"yellow\"}/>\n          </div>\n          : null\n          }\n          </div>\n      </>\n    </div>\n  }\n\n  const attackMap =  attacker?.attacks.map((attack, idx) => {\n    return <div key={idx}><Attack attack={attack } available={() => canAttackTargetDefender(attack, defender)}\n                           selected={attack === attacker.weapon} /></div>\n    \n  \n  })\n\n  return <div className={\"attacks\"}>\n    <h1>{attacker?.attacks.length > 0 ? Attacks : \"pacifist\"}</h1>\n      {attacker? attackMap : null} \n  </div>\n}\n\nexport const Attacker = ({attacker, defender, setAttacker, units}) => {\n\n  const setAttackingWeapon = (weapon) => {\n  if(weapon !== attacker.weapon){\n      setAttacker({\n        ...attacker,\n        weapon: weapon\n      })\n    } else {\n      setAttacker({\n        ...attacker,\n        weapon: null\n      })\n    }\n    return null;\n  }\n  return <AttackerErrorBoundary>\n  <UnitSelector setUnit={setAttacker} currentUnit={attacker} units={units}> \n  {attacker?.attacks.length > 0 ? \n      <Attacks attacker={attacker} \n      setAttackingWeapon={setAttackingWeapon} \n      defender={defender} />:\n        attacker ?\n          <>pacifist</>  :\n          \"nonthing selected\"}\n  </UnitSelector>\n  </AttackerErrorBoundary>\n}\n"]},"metadata":{},"sourceType":"module"}