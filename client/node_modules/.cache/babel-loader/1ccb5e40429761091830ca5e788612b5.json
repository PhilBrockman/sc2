{"ast":null,"code":"var _jsxFileName = \"/Users/philbrockman/coding/sc2/client/src/components/Attacker/Attacker.js\";\nimport React from 'react';\nimport { Unit } from \"../Unit\";\nimport { Upgrade } from \"../Upgrade\";\nimport { useSpring, animated } from 'react-spring';\nimport { immortal, marauder, marine } from '../../SC2Data';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFENDER_DEAD = \"defender is dead\";\n\nconst Bonus = ({\n  attack,\n  defender,\n  textstyle\n}) => {\n  return attack.bonuses.map((bonus, index) => {\n    let baseText = /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\"Anti-\", bonus.to, \":\"]\n    }, void 0, true);\n\n    let bonusText = /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [bonus.baseDamage, \" (+\", bonus.researchBonus, \")\"]\n    }, void 0, true);\n\n    let modifier;\n\n    if (!defender) {\n      modifier = /*#__PURE__*/_jsxDEV(\"span\", {\n        children: bonusText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 18\n      }, this);\n    } else {\n      const overlap = intersection(intersection(attack.targets, defender.types), [\"Ground\", \"Air\"]);\n\n      if (overlap.length === 0) {\n        modifier = /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\" \", bonusText, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 20\n        }, this);\n      } else {\n        if (defender.types.includes(bonus.to)) {\n          modifier = /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [bonusText, \" \\uD83C\\uDFAF\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 22\n          }, this);\n        } else {\n          modifier = /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              textDecoration: \"wavy line-through red\"\n            },\n            children: bonusText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 21\n          }, this);\n        }\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [baseText, /*#__PURE__*/_jsxDEV(\"span\", {\n        className: textstyle,\n        children: modifier\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 7\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 12\n    }, this);\n  });\n};\n\n_c = Bonus;\n\nconst Bullet = ({\n  animate,\n  display\n}) => {\n  if (display) {\n    if (animate) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"bullet\",\n        children: \"\\u27A1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"\\u27A1\"\n      }, void 0, false);\n    }\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  }\n};\n\n_c2 = Bullet;\n\nfunction intersection(a, b) {\n  var setA = new Set(a);\n  var setB = new Set(b);\n  var intersection = new Set([...setA].filter(x => setB.has(x)));\n  return Array.from(intersection);\n}\n\nconst Attacks = ({\n  unit,\n  defender,\n  defaultIndex,\n  setDefaultIndex\n}) => {\n  const toggleIndex = index => {\n    if (index === defaultIndex) {\n      setDefaultIndex(null);\n    } else {\n      setDefaultIndex(index);\n    }\n  };\n\n  return unit.attacks.map((attack, index) => {\n    const cns = [];\n    cns.push(index === defaultIndex ? \"main-weapon\" : \"other-choice\");\n    const available = canAttackTargetDefender(attack, defender);\n    cns.push(available ? \"attack-available\" : \"attack-unavailable\");\n    const cn = available ? \"success\" : \"fail\";\n    console.log('available', available);\n    const attacks = [\"attack-name\"];\n    attacks.push(available ? \"alt-weapon\" : \"unavailable\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => toggleIndex(index),\n      className: cns.join(\" \"),\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: attacks.join(\" \"),\n          children: [/*#__PURE__*/_jsxDEV(Bullet, {\n            animate: available && defaultIndex === null,\n            display: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, this), attack.name, \" \", attack.repeats > 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"(x \", attack.repeats, \")\"]\n          }, void 0, true) : null, index === defaultIndex ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\"Base Damage: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: cn,\n                children: [attack.baseDamage, \" (+\", attack.researchBonus, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 28\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(Bonus, {\n              attack: attack,\n              defender: defender,\n              textstyle: cn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 11\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }, this)\n      }, void 0, false)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 12\n    }, this);\n  });\n};\n\n_c3 = Attacks;\nexport const Attacker = ({\n  unit,\n  defender,\n  setUnit,\n  attackChoice\n}) => {\n  const [attack, setAttack] = attackChoice;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"unit\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Unit, {\n        unit: unit,\n        setUnit: setUnit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Attacks, {\n        unit: unit,\n        defaultIndex: attack,\n        setDefaultIndex: setAttack,\n        defender: defender\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 10\n  }, this);\n};\n_c4 = Attacker;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Bonus\");\n$RefreshReg$(_c2, \"Bullet\");\n$RefreshReg$(_c3, \"Attacks\");\n$RefreshReg$(_c4, \"Attacker\");","map":{"version":3,"sources":["/Users/philbrockman/coding/sc2/client/src/components/Attacker/Attacker.js"],"names":["React","Unit","Upgrade","useSpring","animated","immortal","marauder","marine","DEFENDER_DEAD","Bonus","attack","defender","textstyle","bonuses","map","bonus","index","baseText","to","bonusText","baseDamage","researchBonus","modifier","overlap","intersection","targets","types","length","includes","textDecoration","Bullet","animate","display","a","b","setA","Set","setB","filter","x","has","Array","from","Attacks","unit","defaultIndex","setDefaultIndex","toggleIndex","attacks","cns","push","available","canAttackTargetDefender","cn","console","log","join","name","repeats","Attacker","setUnit","attackChoice","setAttack"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Unit} from \"../Unit\"\nimport {Upgrade} from \"../Upgrade\"\nimport { useSpring, animated } from 'react-spring'\nimport { immortal, marauder, marine } from '../../SC2Data'\n\n\nconst DEFENDER_DEAD = \"defender is dead\"\n\nconst Bonus = ({attack, defender, textstyle}) => {\n\n  return attack.bonuses.map((bonus, index) => {\n    let baseText = <>Anti-{bonus.to}:</>\n    let bonusText = <>{bonus.baseDamage} (+{bonus.researchBonus})</>;\n    let modifier;\n    \n    if(!defender){\n      modifier = <span>{bonusText}</span>\n    } else {\n      const overlap = intersection(intersection(attack.targets, defender.types), [\"Ground\", \"Air\"]);\n      if (overlap.length === 0){\n        modifier = <span> {bonusText} </span>\n      }else{\n        if (defender.types.includes(bonus.to) ){\n          modifier=  <span>{bonusText} 🎯</span>\n        } else {\n          modifier= <span style={{textDecoration: \"wavy line-through red\"}}>{ bonusText}</span>\n        }\n      }\n    }\n\n    return <div key={index}>\n      {baseText}\n      <span className={textstyle}>\n      {modifier}\n      </span>\n    </div>\n  })  \n}\n\nconst Bullet = ({animate, display}) => {\n  if(display){\n    if (animate){\n      return <span className={\"bullet\"}>➡</span>\n    } else {\n      return <>➡</>\n    }\n  } else {\n    return <></>\n  }\n}\n\nfunction intersection(a, b) {\n  var setA = new Set(a);\n  var setB = new Set(b);\n  var intersection = new Set([...setA].filter(x => setB.has(x)));\n  return Array.from(intersection);\n}\n\n\n\nconst Attacks = ({unit, defender, defaultIndex, setDefaultIndex}) => {\n  const toggleIndex = (index) => {\n      if(index === defaultIndex){\n        setDefaultIndex(null)\n      } else {\n        setDefaultIndex(index)\n      }\n    }\n  return unit.attacks.map((attack, index) => {\n    const cns = []\n    cns.push(index === defaultIndex ? \"main-weapon\" : \"other-choice\");\n    const available = canAttackTargetDefender(attack, defender);\n    cns.push(available ? \"attack-available\" : \"attack-unavailable\");\n    const cn = available ? \"success\" : \"fail\";\n    console.log('available', available)\n\n    const attacks = [\"attack-name\"]\n    attacks.push(available? \"alt-weapon\": \"unavailable\")\n\n    return <div key={index} onClick={() => toggleIndex(index)} className={cns.join(\" \")}>\n      <>\n        <div className={attacks.join(\" \")} >\n          <Bullet animate={available && (defaultIndex === null)} display={(true)}/>\n              {attack.name} {attack.repeats > 1 ? <>(x {attack.repeats})</>: null}\n        {index === defaultIndex ?\n          <div>\n            <>Base Damage: <span className={cn}>{attack.baseDamage} (+{attack.researchBonus})</span></>\n            <Bonus attack={attack} defender={defender} textstyle={cn}/>\n          </div>\n          : null\n          }\n          </div>\n      </>\n    </div>\n  })\n}\n\nexport const Attacker = ({unit, defender, setUnit, attackChoice}) => {\n  const [attack, setAttack] = attackChoice;\n\n  return <div className={\"unit\"}>\n    <div>\n    <Unit unit={unit} setUnit={setUnit}></Unit>\n    <Attacks unit={unit} defaultIndex={attack} setDefaultIndex={setAttack} defender={defender} />\n    </div>\n  </div>\n}\n"]},"metadata":{},"sourceType":"module"}