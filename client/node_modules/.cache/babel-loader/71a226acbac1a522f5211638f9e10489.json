{"ast":null,"code":"var _jsxFileName = \"/Users/philbrockman/coding/sc2/client/src/components/Middle.js\";\nimport { Upgrade } from \"./Upgrade\";\nimport { canAttackTargetDefender, Damage } from \"./Attacker/Damage\";\nimport { UnitImg } from './UnitSelector/Unit';\nimport { RandomButton } from \"./UnitSelector/UnitSelector\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DPS = ({\n  attacker,\n  defender,\n  aidx,\n  attackResearch,\n  shieldsResearch,\n  armorResearch,\n  setDefender,\n  setAttacker,\n  units\n}) => {\n  let d = new Damage(attacker, defender, aidx, [attackResearch, shieldsResearch, armorResearch]);\n  const backup = new Damage(JSON.parse(JSON.stringify(attacker)), JSON.parse(JSON.stringify(defender)), aidx, [attackResearch, shieldsResearch, armorResearch]);\n  const active = (attacker === null || attacker === void 0 ? void 0 : attacker.attacks) ? canAttackTargetDefender(attacker.attacks[aidx], defender) : null;\n  const cns = [\"button\"];\n  let text;\n\n  if (active) {\n    cns.push(\"active\");\n\n    if (d.oneShot()) {\n      text = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\" Attack: \\u2694\\uFE0F \", d.oneShot().totalDamage]\n      }, void 0, true);\n    } else {\n      text = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"Victory (reset)\"\n      }, void 0, false);\n    }\n  } else {\n    if (attacker && defender) {\n      cns.push(\"inactive\");\n\n      if (attacker.attacks.map(attack => {\n        return canAttackTargetDefender(attack, defender);\n      }).filter(item => item).length > 0) {\n        text = /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: \"\\u2B05 Select a valid attack\"\n        }, void 0, false);\n      } else {\n        cns.push(\"invalid\");\n        text = /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [attacker.name, \" can't attack \", defender.name]\n        }, void 0, true);\n      }\n    } else {\n      text = /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"Select:\", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: !attacker ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"attacker\",\n            children: [/*#__PURE__*/_jsxDEV(RandomButton, {\n              display: display,\n              randomize: setAttacker(units[Math.floor(Math.random() * units.length)]),\n              randomText: \"üé≤\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 63\n            }, this), \" Attacker \\u2B05\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 35\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: !defender ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"defender\",\n            children: [\"\\u27A1 Defender \", /*#__PURE__*/_jsxDEV(RandomButton, {\n              position: setDefender,\n              display: display,\n              randomText: \"üé≤\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 73\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 34\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n  const resetDefender = () => {// const units = useUnits();\n    // if(defender?.name) {\n    //  setDefender(units.find(unit => unit.name === defender.name))\n    //  }\n  };\n\n  const updateHealth = () => {\n    if (!attacker || !defender) return;\n    let newValues = d.oneShot();\n    console.log('newValues', newValues);\n    let newDefender = defender;\n    console.log('aidx', aidx);\n\n    if (newValues && aidx !== undefined && aidx !== null) {\n      console.log('staritng for loop'); // for(var i = 0; i < attacker.attacks[aidx].repeats; i++){\n      // console.log('looping', i)\n\n      if (newValues.health > 0 || true) {\n        console.log(\"updatinghealth\");\n        let newValues = d.oneShot();\n\n        if (newValues) {\n          newDefender = { ...newDefender,\n            base: { ...newDefender.base,\n              health: newValues.health,\n              shields: newValues.shields\n            }\n          };\n        }\n\n        console.log('newDefender', newDefender);\n        d = new Damage(JSON.parse(JSON.stringify(attacker)), JSON.parse(JSON.stringify(newDefender)), aidx, [attackResearch, shieldsResearch, armorResearch]);\n      } else {\n        console.log(\">>>>>failed health chi\");\n      } //  }\n\n\n      setDefender(newDefender);\n    } else {\n      resetDefender();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"DPS\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: cns.join(\" \"),\n        onClick: () => updateHealth(),\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), active ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => resetDefender(),\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [backup.eliminate(), \" attacks to eliminate\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 10\n  }, this);\n};\n\n_c = DPS;\nexport const Middle = ({\n  attacker,\n  defender,\n  aidx,\n  research,\n  setDefender,\n  setAttacker,\n  units\n}) => {\n  if (!research || !units) {\n    return units ? \"no rsearch\" : \"or no units\";\n  } else {\n    var _units$find, _units$find$base, _units$find2, _units$find2$base, _attacker$attacks;\n\n    const [attackResearch, setAttackResearch, shieldsResearch, setShieldsResearch, armorResearch, setArmorResearch] = research;\n    let d = attacker && defender ? new Damage(attacker, defender, aidx, [attackResearch, shieldsResearch, armorResearch]) : null;\n    console.log(\"d is for Damage\", d);\n    const baseShields = defender ? (_units$find = units.find(unit => unit.name === (defender === null || defender === void 0 ? void 0 : defender.name))) === null || _units$find === void 0 ? void 0 : (_units$find$base = _units$find.base) === null || _units$find$base === void 0 ? void 0 : _units$find$base.shields : null;\n    const baseHealth = (_units$find2 = units.find(unit => unit.name === (defender === null || defender === void 0 ? void 0 : defender.name))) === null || _units$find2 === void 0 ? void 0 : (_units$find2$base = _units$find2.base) === null || _units$find2$base === void 0 ? void 0 : _units$find2$base.health;\n    const targetable = (attacker === null || attacker === void 0 ? void 0 : (_attacker$attacks = attacker.attacks) === null || _attacker$attacks === void 0 ? void 0 : _attacker$attacks.filter(attack => canAttackTargetDefender(attack, defender)).length) > 0;\n    const attackerDamage = d ? !d.oneShot() ? \"up\" : d.oneShot().totalDamage ? \"‚öîÔ∏è\" + d.oneShot().totalDamage : targetable ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"breathe\",\n      children: \"\\uD83D\\uDC40\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }, this) : defender ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"fail\",\n      children: \"\\uD83E\\uDD4A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"\\u2192\"\n    }, void 0, false) : \"-\";\n\n    const unitStats = /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"unit-stats\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: attacker ? /*#__PURE__*/_jsxDEV(UnitImg, {\n            unit: attacker,\n            label: attackerDamage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 28\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: attacker ? /*#__PURE__*/_jsxDEV(Upgrade, {\n            researchKind: \"attack\",\n            updateResearch: setAttackResearch,\n            value: attackResearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 30\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: baseShields ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [(defender === null || defender === void 0 ? void 0 : defender.research.shields) ? /*#__PURE__*/_jsxDEV(Upgrade, {\n              researchKind: \"shields\",\n              updateResearch: setShieldsResearch,\n              value: shieldsResearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this) : null, \" \"]\n          }, void 0, true) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: baseShields && (defender === null || defender === void 0 ? void 0 : defender.research.shields) ? /*#__PURE__*/_jsxDEV(UnitImg, {\n            unit: defender,\n            label: shieldsResearch + \"üßä\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 60\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: defender ? /*#__PURE__*/_jsxDEV(Upgrade, {\n            researchKind: \"armor\",\n            updateResearch: setArmorResearch,\n            value: armorResearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: defender ? /*#__PURE__*/_jsxDEV(UnitImg, {\n            unit: defender,\n            label: defender.base.armor + armorResearch + \"üõ°\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 28\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }, this)\n    }, void 0, false);\n\n    let vitality = /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [baseShields ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\uD83E\\uDDCA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [defender.base.shields, \" / \", baseShields]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [defender ? defender.base.armor + armorResearch * defender.research.armor : null, \" \\uD83D\\uDEE1\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: defender ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"= \", defender.base.armor, \" + \", armorResearch]\n        }, void 0, true) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u2665\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: defender ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [defender.base.health, \" / \", baseHealth]\n        }, void 0, true) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [vitality, /*#__PURE__*/_jsxDEV(DPS, {\n          attacker: attacker,\n          defender: defender,\n          aidx: aidx,\n          attackResearch: attackResearch,\n          armorResearch: armorResearch,\n          shieldsResearch: shieldsResearch,\n          setDefender: setDefender,\n          setAttacker: setAttacker,\n          units: units\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [attacker || defender ? /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Unit Upgrades\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            opacity: .2\n          },\n          children: \"Unit Upgrades\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 59\n        }, this), unitStats]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 12\n    }, this);\n  } // console.log('attacker', attacker)\n  // console.log('defender', defender)\n  // console.log('research', research)\n  // return(\n  //   );\n\n};\n_c2 = Middle;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DPS\");\n$RefreshReg$(_c2, \"Middle\");","map":{"version":3,"sources":["/Users/philbrockman/coding/sc2/client/src/components/Middle.js"],"names":["Upgrade","canAttackTargetDefender","Damage","UnitImg","RandomButton","DPS","attacker","defender","aidx","attackResearch","shieldsResearch","armorResearch","setDefender","setAttacker","units","d","backup","JSON","parse","stringify","active","attacks","cns","text","push","oneShot","totalDamage","map","attack","filter","item","length","name","display","Math","floor","random","resetDefender","updateHealth","newValues","console","log","newDefender","undefined","health","base","shields","join","eliminate","Middle","research","setAttackResearch","setShieldsResearch","setArmorResearch","baseShields","find","unit","baseHealth","targetable","attackerDamage","unitStats","armor","vitality","flexDirection","opacity"],"mappings":"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","sourcesContent":["import {Upgrade} from \"./Upgrade\"\nimport {canAttackTargetDefender, Damage} from \"./Attacker/Damage\"\nimport { UnitImg } from './UnitSelector/Unit'\nimport {RandomButton} from \"./UnitSelector/UnitSelector\"\n\nconst DPS = ({attacker, defender, aidx,  attackResearch, shieldsResearch, armorResearch, setDefender, setAttacker, units}) => {\n  let d = new Damage(attacker, defender, aidx, [ attackResearch, shieldsResearch, armorResearch])\n\n  const backup = new Damage(JSON.parse(JSON.stringify(attacker)),\n    JSON.parse(JSON.stringify(defender)), aidx,\n    [ attackResearch, shieldsResearch, armorResearch]\n    )\n  const active = attacker?.attacks? canAttackTargetDefender(attacker.attacks[aidx], defender) : null;\n  const cns = [\"button\"];\n\n  let text\n  if(active){\n    cns.push(\"active\")\n    if(d.oneShot()){\n      text = <> Attack: ‚öîÔ∏è {d.oneShot().totalDamage}</>\n    } else {\n      text = <>Victory (reset)</>\n    }\n  } else {\n    if (attacker && defender) {\n      cns.push(\"inactive\")\n      if(attacker.attacks.map(attack => {\n              return canAttackTargetDefender(attack, defender)\n            }).filter(item => item).length > 0){\n              text = <>‚¨Ö Select a valid attack</>\n            }\n      else{\n        cns.push(\"invalid\")\n        text = <>{attacker.name} can't attack {defender.name}</>\n      }\n\n    } else {\n      text= <>Select: \n                <div>{!attacker ? <div className={\"attacker\"}><RandomButton display={display} randomize={setAttacker(units[Math.floor(Math.random()*units.length)])} randomText={\"üé≤\"}/> Attacker ‚¨Ö</div>: null}</div>\n                <div>{!defender? <div className={\"defender\"}>‚û° Defender <RandomButton position={setDefender} display={display}  randomText={\"üé≤\"}/></div>: null}</div>        \n              </>\n    }\n  }\n\n  const resetDefender = () => {\n    // const units = useUnits();\n    // if(defender?.name) {\n    //  setDefender(units.find(unit => unit.name === defender.name))\n    //  }\n  }\n\n  const updateHealth = () => {\n    if(!attacker || !defender) return;\n    let newValues = d.oneShot();\n    console.log('newValues', newValues)\n    let newDefender = defender;\n    console.log('aidx', aidx)\n    if(newValues && aidx !== undefined && aidx !== null){\n      console.log('staritng for loop')\n      // for(var i = 0; i < attacker.attacks[aidx].repeats; i++){\n        // console.log('looping', i)\n        if(newValues.health > 0 || true){\n        console.log(\"updatinghealth\")\n          let newValues = d.oneShot();\n          if(newValues){\n            newDefender = {\n              ...newDefender,\n              base: {\n                ...newDefender.base,\n                health: newValues.health,\n                shields: newValues.shields,\n              }\n            }\n            }\n            console.log('newDefender', newDefender)\n          d = new Damage(JSON.parse(JSON.stringify(attacker)),\n          JSON.parse(JSON.stringify(newDefender)), aidx,\n          [ attackResearch, shieldsResearch, armorResearch]\n            )\n            } else {\n              console.log(\">>>>>failed health chi\")\n            }\n    //  }\n     setDefender(newDefender)\n    } else {\n      resetDefender()\n    }\n  }\n\n  return <div className={\"DPS\"}>\n            <div><span className={cns.join(\" \")} onClick={() => updateHealth()}>{text}</span></div>\n            {active ? <>\n              <div> <button onClick={() => resetDefender()}>Reset</button> </div>\n              <div>{backup.eliminate()} attacks to eliminate</div>\n          </> : null}\n        </div>\n}\n\nexport const Middle = ({attacker, defender, aidx, research, setDefender, setAttacker, units}) => {\n\n  if(!research || !units){\n    return units ?  \"no rsearch\":  \"or no units\";\n  } else {\n    const [attackResearch, setAttackResearch, shieldsResearch, setShieldsResearch, armorResearch, setArmorResearch] = research\n    let d = attacker && defender ?\n              new Damage(attacker, defender, aidx, [ attackResearch, shieldsResearch, armorResearch]) :\n              null;\n    console.log(\"d is for Damage\", d) \n    \n    const baseShields = defender ?\n      units.find(unit => unit.name === defender?.name)?.base?.shields:\n      null ;\n\n    const baseHealth = units.find(unit => unit.name === defender?.name)?.base?.health\n\n    const targetable = attacker?.attacks?.filter(attack => canAttackTargetDefender(attack, defender)).length > 0\n\n    const attackerDamage = d ? !d.oneShot()? \"up\":\n      d.oneShot().totalDamage ? \n      \"‚öîÔ∏è\" + d.oneShot().totalDamage :\n       targetable ?\n          <span className={\"breathe\"}>üëÄ</span>:\n          defender ?\n            <span className={\"fail\"}>ü•ä</span>:\n            <>‚Üí</>:\n                              \"-\";\n\n\n    const unitStats = <>\n      <div className={\"unit-stats\"}>\n          <div>{attacker ? <UnitImg unit={attacker} label={(attackerDamage)} /> : null}</div>\n            <div>{attacker ? <Upgrade researchKind={\"attack\"} updateResearch={setAttackResearch} value={attackResearch} /> : null }</div>\n          <div></div>\n\n          <div></div>\n          <div>\n            {baseShields ?  <>\n              {defender?.research.shields?\n              <Upgrade researchKind={\"shields\"} updateResearch={setShieldsResearch} value={shieldsResearch} />\n              : null} </>\n             :null }\n          </div>\n          <div>{baseShields && defender?.research.shields? <UnitImg unit={defender} label={shieldsResearch+\"üßä\"}/>: null}</div>\n\n          <div></div>\n            <div>{defender? <Upgrade researchKind={\"armor\"} updateResearch={setArmorResearch} value={armorResearch} /> : null }</div>\n          <div>{defender ? <UnitImg unit={defender} label={(defender.base.armor+armorResearch)+\"üõ°\"}/>: null}</div>\n        </div> \n      </>\n\n    let vitality = <>\n         {baseShields ? <>\n          <div>üßä</div>\n          <div>{defender.base.shields} / {baseShields}</div>\n          </>: null}\n          <div>{defender? defender.base.armor + armorResearch*defender.research.armor: null} üõ°</div>\n          <div>{defender? <>= {defender.base.armor} + {armorResearch}</>: null}</div>\n\n          <div>‚ô•Ô∏è</div>\n          <div>{defender? <>{defender.base.health} / {baseHealth}</> : null}</div>\n    </>\n\n\n    return <div style={{display:\"flex\", flexDirection: \"column\"}}>\n      <div>\n      {vitality}\n            \n      <DPS attacker={attacker} defender={defender} aidx={aidx}\n          attackResearch={attackResearch} armorResearch={armorResearch} shieldsResearch={shieldsResearch}\n          setDefender={setDefender} setAttacker={setAttacker} units={units}/>\n      </div>\n\n\n      <div>\n        {attacker || defender ? <h2>Unit Upgrades</h2> :  <h2 style={{opacity: .2}}>Unit Upgrades</h2>  }\n        {unitStats}\n        </div>\n\n      \n      </div>\n\n  }\n\n  // console.log('attacker', attacker)\n  // console.log('defender', defender)\n  // console.log('research', research)\n\n  // return(\n\n  //   );\n}"]},"metadata":{},"sourceType":"module"}